<!DOCTYPE html>
<!--
 - Copyright (c) 2018 J. Verkin
-->
<html>
<head>
<title>Adventskalender</title>
<meta charset="UTF-8">
<!-- disable scrolling & scaling on mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" /> 
<!-- disable caching -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<style type="text/css">
	body {
		margin: 0;
		cursor: pointer;
	}

	#calendar {
		position: absolute;
		display: flex;
		flex-wrap: wrap;
		height: 100%;
		width: 100%;
	}
		
	#calendar div {
		width: 25%;
		background-image: url(star.png);
		background-size: 100%;
		background-repeat: no-repeat;
		text-align: center;
		line-height: 15vh;
		font-size: 5vh;
		font-family: "Comic Sans MS";
	}
</style>
<script type="text/javascript">
	var currentDay = 0;
	// init
	var init = function(currentDay) {
		if(currentDay == null)
		{
			var date = new Date();
			if(date.getMonth() < 11)
				currentDay = 0;
			else
				currentDay = date.getDate();
		}
	
		for(var day = 1; day <= 24; day++)
		{
			var dayElement = document.createElement("div");
			dayElement.style.backgroundImage = day + ".png";
			dayElement.innerHTML = day;
								
			dayElement.onclick = function(day) {
				return function(event) {					
					if(day > currentDay)
						return;
						
					if(localStorage.getItem("day." + day) == "open")
						document.getElementById("day_" + day).classList.add("open");
					else
						localStorage.setItem("day." + day, "open");
						
					showImage(day);						
				};
			} (day);
			
			if(localStorage.getItem("day." + day) == "open")
				dayElement.classList.add("open");
				
			document.getElementById("calendar").append(dayElement);
		}
		
		document.getElementById("detail").onclick = function(event) {
			hideImage();
		};
	};
	
	var showImage = function(day) {		
		document.getElementById("detail").style.backgroundImage = day + ".png";
		document.getElementById("detail").classList.remove("hidden");
	}
	
	var hideImage = function() {
		document.getElementById("detail").classList.add("hidden");
	}

	//document.addEventListener("DOM")
</script>
</head>
<body onload="init();">
	<div id="calendar">
	</div>
	<div id="detail"></div>
</body>
</html>